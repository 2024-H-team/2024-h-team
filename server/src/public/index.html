<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Server Logs</title>
        <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
        <style>
            body {
                margin: 0;
                font-family: sans-serif;
                background: #1e1e1e;
            }
            #logs {
                height: 90dvh;
                width: 98%;
                color: #00ff00;
                padding: 10px;
                font-family: monospace;
                overflow-x: hidden;
                overflow-y: auto;
            }
            .log-entry {
                font-size: 13px;
                word-break: break-all;
                word-wrap: break-word;
                border-bottom: 1px solid #333;
                padding: 5px;
            }
        </style>
    </head>
    <body>
        <div id="logs"></div>
        <script>
            const socket = io('https://tabinaviapi.nguyenduchuynh.com/');
            const logsDiv = document.getElementById('logs');

            fetch('/api/logs')
                .then((res) => res.json())
                .then((logs) => {
                    logs.forEach((log) => {
                        addLogEntry(log);
                    });
                });

            socket.on('log', (log) => {
                addLogEntry(log);
            });

            function addLogEntry(log) {
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.textContent = `${log}`;
                logsDiv.appendChild(entry);
                logsDiv.scrollTop = logsDiv.scrollHeight;
            }
        </script>
    </body>
</html>
